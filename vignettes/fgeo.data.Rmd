---
title: "Get started"
author: "Mauro Lepore"
date: "`r Sys.Date()`"
output:
  rmarkdown::html_vignette:
    fig_caption: yes
vignette: >
  %\VignetteIndexEntry{Get started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Overview

__fgeo.data__ provides open datasets of ForestGEO. To get started run this:

```{r}
# install.packages("remotes")
# remotes::install_github("forestgeo/fgeo.data")
library(fgeo.data)
```

(See [Installation](https://forestgeo.github.io/fgeo.data/index.html#installation))

For an index of all available datasets and access see [Reference](https://forestgeo.github.io/fgeo.data/reference/index.html).

## Data dictionary

Find descriptions searching by table or column name.

```{r, echo=FALSE}
DT::datatable(data_dictionary)
```

## Example

### ViewFullTable (`vft`)

```{r}
str(luquillo_vft_random, give.attr = FALSE)

# Similar to `luquillo_vft_random`; truncating list output for space
str(luquillo_vft_1ha, give.attr = FALSE, list.len = 5)
```

### ViewTaxonomy (`taxa`)

```{r}
str(luquillo_taxa, give.attr = FALSE)
```

### Census (`tree` and `stem`)

```{r}
str(bci_tree6_random, give.attr = FALSE)

str(bci_stem7_1ha, give.attr = FALSE)
```

### Elevation (`elevation`)

```{r}
str(bci_elevation)
```

## Using raw data (database output)

Reading raw data from .csv files safely:

* With [__readr__](https://fgeo.netlify.com/2018/03/13/2018-03-13-import-dataset/) (recommended).
* [With only base R](https://fgeo.netlify.com/2018/03/15/2018-03-15-how-to-read-data-safely-with-only-base-r/).

```{r}
# ForestGEO's database delivers tab delimited files with extension .csv.
# Instead of an url, you likely have a path to a directory in your computer.
url <- "http://bit.ly/fgeo-data-luquillo-taxa"

# TO AVOID ERRORS
# Specify columns class explicitely (for an example showing only some columns)
column_classes <- c(
  ViewID = "integer", 
  SpeciesID = "integer", 
  SubspeciesID = "integer", 
  Family = "character", 
  Mnemonic = "character"
)
# Specify how to interprate missing values
na_strings <- c("", "NA", "NULL")

raw_luquillo_taxa <- read.delim(
  file = url, 
  na.strings = na_strings, 
  colClasses = column_classes
)

some_rows <- some_columns <- 1:5
raw_luquillo_taxa[some_rows, some_columns]

# Note these are the same as `column_classes` defined above
sapply(raw_luquillo_taxa[some_rows, some_columns], class)
```
