---
title: "md and themed html documents"
subtitle: Subtitle
author: "Your name"
date: "`r Sys.Date()`"
output: github_document
---

```{r setup, include=FALSE}
# This chunk named setup will run before any other code (https://goo.gl/BeM2Uu)
set.seed(1014)
knitr::opts_chunk$set(
  echo = TRUE,
  comment = "#>",
  collapse = TRUE,
  cache = FALSE,
  # Figures (http://r4ds.had.co.nz/)
  out.width = "70%",
  fig.align = "center",
  fig.width = 6,
  fig.asp = 0.618,
  fig.show = "hold"
)
```

---
Reuse the style and options of this document

The yaml header and the setup chunk of this document come from a template. To access this template, install __fgeo.templates__ (see [how](https://forestgeo.github.io/fgeo.templates/#installation)).

![](https://i.imgur.com/zAf37YI.png)

---

# Source

* On Mon, Mar 19, 2018 at 11:31 PM, Lao, Suzanne <LAOZ@si.edu>
* On Mon, Mar 19, 2018 at 11:34 PM, Lao, Suzanne <LAOZ@si.edu>

See https://github.com/forestgeo/fgeo.opendata/issues/1.

# Setup

```{r}
library(here)
library(readr)
library(dplyr)
library(fgeo.tool)
library(usethis)

warn_if_nms_differ <- function(x, y) {
  nms_differ <- length(setdiff(names(x), names(y)))
  if (nms_differ) {
    warning("Detected unexpected names.")
  }
}
```

# Data

```{r dir-path}
dir_path <- "data-raw/database-output"
```

## ViewTaxonomy

Complete ViewTaxonomy table.

```{r taxa}
path_taxa <- here::here(dir_path, "ViewTaxonomy.csv")
taxa_bci <- read_tsv(
  path_taxa, 
  col_types = fgeo.tool::type_taxa(), 
  na = c("", "NA", "NULL")
)
warn_if_nms_differ(taxa_bci, fgeo.tool::type_taxa())

glimpse(taxa_bci)
use_data(taxa_bci, overwrite = TRUE)
```

## All trees in one hectare

One hectare of data for hectare: `px >= 700` and `px < 800`; and `py >=100` and `py < 200`. The data includes only those records from census 2005 and census 2010.

```{r}
path_vft_1ha_bci <- here::here(dir_path, "ViewFullTable_hec37.csv")
vft_1ha_bci <- read_tsv(
  path_vft_1ha_bci, 
  col_types = fgeo.tool::type_vft(),
  na = c("", "NA", "NULL")
)
warn_if_nms_differ(vft_1ha_bci, fgeo.tool::type_vft())

glimpse(vft_1ha_bci)
use_data(vft_1ha_bci, overwrite = TRUE)
```

## One thousand trees, selected at random

1000 randomly chosen trees from the whole plot. Only included data from census 2005 and census 2010.

```{r}
path_vft_random_bci <- here::here(dir_path, "ViewFullTable_random.csv")
vft_random_bci <- read_tsv(
  path_vft_random_bci, 
  col_types = fgeo.tool::type_vft(),
  na = c("", "NA", "NULL")
)
warn_if_nms_differ(vft_random_bci, fgeo.tool::type_vft())

glimpse(vft_random_bci)
use_data(vft_random_bci, overwrite = TRUE)
```
